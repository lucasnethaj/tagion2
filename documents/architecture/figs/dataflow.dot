```graphviz
digraph Message_flow {
rankdir=UD;
  compound=true;
  labelangle=35;
   node [style=filled]
  node [ shape = "rect"];
  DART [shape = cylinder];
  TLS [ style=filled fillcolor=green ];
  P2P [ style=filled fillcolor=red]
  ContractInterface [shape = signature]
  Transcript [shape = note]
  Consensus [label="EpochCreator"]
  subgraph cluster_1 {
    peripheries=0;
    TLS -> ContractInterface [label="HiRPC(contract)" color=green];
 	ContractInterface -> Collector [label=contract color=green];
	Collector -> TVM [label="contract-S" color=green];
	TVM -> Consensus [labelangle="45" label=contract color=green];
	Consensus -> Collector [label=contract color=darkgreen];
	Consensus -> Transcript [label=epoch color=green];
    TVM -> Transcript [label="archives\nin/out" color=red];
  };
  subgraph cluster_2 {
    peripheries=0;
	DART;
  };
  subgraph cluster_3 {
    peripheries=0;
	DARTSync -> ConsensusInterface [label="DART(ro)" dir=both color=magenta];
	ConsensusInterface -> P2P [label=Document dir=both];
  };
  DARTSync -> DART [label="DART(crud)" color=magenta];
  DART -> Collector [label=recorder color=red];
  DART -> Replicator [label=recorder color=red dir=both];
  Consensus -> ConsensusInterface [label=gossip dir=both color=cyan4];
  Transcript -> DART [label=recorder color=blue];
  Replicator -> ConsensusInterface [label=recorder];
}
```
